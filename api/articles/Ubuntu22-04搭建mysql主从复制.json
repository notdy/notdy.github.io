{"title":"Ubuntu22.04搭建mysql主从复制","uid":"af286b6aa711a74975488d92e69b597a","slug":"Ubuntu22-04搭建mysql主从复制","date":"2023-11-02T01:22:53.000Z","updated":"2023-11-02T01:29:29.604Z","comments":true,"path":"api/articles/Ubuntu22-04搭建mysql主从复制.json","keywords":null,"cover":[],"content":"<blockquote>\n<p>记录哈，这个需要两台服务器，每台服务器上面都要安装mysql，若是没有安装，请分别在两台服务器上面运行下面的命令<br>sudo apt install mysql-server</p>\n</blockquote>\n<p>引用<br><a href=\"https://blog.csdn.net/qq_45418837/article/details/132065474\">Ubuntu下的mysql8.0忘记密码怎么办?</a></p>\n<h1 id=\"环境\"><a href=\"#环境\" class=\"headerlink\" title=\"环境\"></a>环境</h1><ul>\n<li>Ubuntu 22.04</li>\n<li>主机:192.168.164.134</li>\n<li>从机:192.168.164.136</li>\n<li>两台服务器的mysql配置文件路径:&#x2F;etc&#x2F;mysql&#x2F;mysql.conf.d&#x2F;mysqld.cnf<blockquote>\n<p>若是不知道在哪里运行下面的命令<br>find &#x2F; -name mysqld.cnf</p>\n</blockquote>\n</li>\n</ul>\n<h1 id=\"主机的配置\"><a href=\"#主机的配置\" class=\"headerlink\" title=\"主机的配置\"></a>主机的配置</h1><p>vim &#x2F;etc&#x2F;mysql&#x2F;mysql.conf.d&#x2F;mysqld.cnf<br>修改成下面的样子,注意server-id不一定要等于1，只要服务器之间的server-id是不一样的就好<br><img src=\"/../images/1.jpg\" alt=\"在这里插入图片描述\"><br>若是远程连接不上mysql服务器可以把&#x2F;etc&#x2F;mysql&#x2F;mysql.conf.d&#x2F;mysqld.cnf文件中的<br>bind-address&#x3D;127.0.0.1<br>mysqlx-bind-address&#x3D;127.0.0.1，这两行注释掉<br><img src=\"/../images/187.jpg\" alt=\"在这里插入图片描述\"><br>完成后执行在终端中执行命令<br>systemctl restart mysql重启mysql服务</p>\n<p>输入mysql -uroot进入到mysql中，注意我的没有设置密码，若你有密码需要加上-p后面写的你密码</p>\n<p>输入下面的命令</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">CREATE USER &#39;remote&#39;@&#39;%&#39; IDENTIFIED BY &#39;remote&#39;;\n     GRANT REPLICATION SLAVE ON *.* TO &#39;remote&#39;@&#39;%&#39;;\n     FLUSH PRIVILEGES;</code></pre>\n<p>在mysql中输入下面命令show master status;<br><img src=\"/../images/123.jpg\" alt=\"在这里插入图片描述\"><br>之后不要动主机</p>\n<h1 id=\"从机的配置\"><a href=\"#从机的配置\" class=\"headerlink\" title=\"从机的配置\"></a>从机的配置</h1><p>vim &#x2F;etc&#x2F;mysql&#x2F;mysql.conf.d&#x2F;mysqld.cnf<br>增加或注释一句server-id &#x3D;2,保存退出<br><img src=\"/../images/12.jpg\" alt=\"在这里插入图片描述\"><br>重启mysql服务 systemctl restart mysql<br>输入mysql -uroot  -p你的密码进入到mysql当中<br>输入下面命令</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">stop slave;\nchange master to master_host&#x3D;&#39;192.168.164.134&#39;,master_user&#x3D;&#39;remote&#39;,master_password&#x3D;&#39;remote&#39;,master_log_file&#x3D;&#39;mysql-bin.000013&#39;,master_log_pos&#x3D;157,get_master_public_key&#x3D;1;\nstart slave;\nshow slave status\\G</code></pre>\n<p>若show slave status\\G的结果是如图片所示即可<br><img src=\"/../images/987.jpg\" alt=\"在这里插入图片描述\"><br>验证:<br>主机用root身份登录<br>从机用root身份登录<br>在主机中新建一个数据库，看看从机中是否存在相同的，若有则配置成功，若没有找原因，原因及其解决办法我去翻翻历史记录，看看能不能找到</p>\n","feature":true,"text":" 记录哈，这个需要两台服务器，每台服务器上面都要安装mysql，若是没有安装，请分别在两台服务器上面运行下面的命令sudo apt install mysql-...","permalink":"/post/Ubuntu22-04搭建mysql主从复制","photos":[],"count_time":{"symbolsCount":"1.4k","symbolsTime":"1 mins."},"categories":[],"tags":[{"name":"Ubuntu","slug":"Ubuntu","count":1,"path":"api/tags/Ubuntu.json"},{"name":"Mysql","slug":"Mysql","count":1,"path":"api/tags/Mysql.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#%E7%8E%AF%E5%A2%83\"><span class=\"toc-text\">环境</span></a></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#%E4%B8%BB%E6%9C%BA%E7%9A%84%E9%85%8D%E7%BD%AE\"><span class=\"toc-text\">主机的配置</span></a></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#%E4%BB%8E%E6%9C%BA%E7%9A%84%E9%85%8D%E7%BD%AE\"><span class=\"toc-text\">从机的配置</span></a></li></ol>","author":{"name":"矽","slug":"blog-author","avatar":"https://ik.imagekit.io/bennyxguo/ObsidianestLogo-hex_hecqbw.png?updatedAt=1692679397324","link":"/","description":"","socials":{"github":"https://github.com/notdy","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"https://blog.csdn.net/qq_45418837","juejin":"","customs":{"bilibili":{"icon":"/svg/bilibli.jpg","link":"https://space.bilibili.com/441747654"}}}},"mapped":true,"hidden":false,"prev_post":{},"next_post":{"title":"springboot访问请求404的原因","uid":"b395fca2233b13450c189f3b1de80e06","slug":"springboot访问请求404的原因","date":"2023-11-02T01:08:02.000Z","updated":"2023-11-02T01:17:18.277Z","comments":true,"path":"api/articles/springboot访问请求404的原因.json","keywords":null,"cover":[],"text":" 是记录，可能出现错误 可能出现的原因1.你请求的URL路径不对,比如说你请求的路径是&#x2F;usr&#x2F;list,GET方法,但是你UserCont...","permalink":"/post/springboot访问请求404的原因","photos":[],"count_time":{"symbolsCount":"1.6k","symbolsTime":"1 mins."},"categories":[],"tags":[{"name":"Java","slug":"Java","count":2,"path":"api/tags/Java.json"},{"name":"SpringBoot","slug":"SpringBoot","count":1,"path":"api/tags/SpringBoot.json"}],"author":{"name":"矽","slug":"blog-author","avatar":"https://ik.imagekit.io/bennyxguo/ObsidianestLogo-hex_hecqbw.png?updatedAt=1692679397324","link":"/","description":"","socials":{"github":"https://github.com/notdy","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"https://blog.csdn.net/qq_45418837","juejin":"","customs":{"bilibili":{"icon":"/svg/bilibli.jpg","link":"https://space.bilibili.com/441747654"}}}},"feature":true}}